<!DOCTYPE html>
<html lang="en">
<head>
    <link href="index.css" rel="stylesheet" type="text/css" />
    <title>Eindproject informatica: handschrift herkenning</title>
</head>
<body>

<form id='uploaden'>
    
    <div class="container">
        <input type="file" id="bestand" accept=".jpg"></input>
        
        <button type="submit">klik hier om uw upload te bevestigen</button>
        <titel>titel</titel>
        <uitleg>uitleg</uitleg>
        <div id="afbeelding">uw gekozen afbeelding: </div>
        <div id="invoeren">
            <div class="bovenste-tekst">Kies hieronder wat u wilt invoeren:</div>
        </div>
        <div id="bevestigen">bevestigen</div>
        <div id="resultaat">resultaat</div>
        <div id="reset"> 
            <button class="reloadButton">klik hier om opnieuw te beginnen</button>
        </div>
        <div id="reclame"> 
            <a href="https://www.crazydogtshirts.com/collections/funny-cat/products/mens-avagato-funny-t-shirts-avocado-cat-tee-cute-cat-face-shirt-novelty-t-shirt?variant=7000697110573" 
            target="_blank">
            <img src="catshirt.webp">
            </a>

        </div>

    </div>
</form>

<script> 
    document.getElementById('bestand').addEventListener('change', function(e){
        const afbeeldingVak = document.getElementById('afbeelding');
        const bestandGebruiker = e.target.files[0];

        // Maak een FileReader object aan om het bestand te lezen
        const lezer = new FileReader();

        // Wanneer het bestand geladen is, toon het in het afbeelding vak
        lezer.onload = function(event) {
            const afbeeldingElement = document.createElement('img');
            afbeeldingElement.src = event.target.result;
            afbeeldingVak.innerHTML = '';
            afbeeldingVak.appendChild(afbeeldingElement);
        }

        // Lees het bestand als een data URL
        lezer.readAsDataURL(bestandGebruiker);
    });


    document.getElementById('uploaden').addEventListener('submit', function(e){
        e.preventDefault();

        const bestandGebruiker= document.getElementById('bestand').files[0];

        const vormData= new FormData();
        vormData.append('bestand van gebruiker', bestandGebruiker, 'bestand-Gebruiker.jpg');

        fetch('http://localhost:5000/process_image', {
            method: "POST",
            body: vormData,
        })
        .then(res=> res.json())
        //.then(data => console.log(data))
        .then(data => {
        // Toon het resultaat op de website
        document.getElementById('resultaat').textContent = `Afbeelding breedte: ${data.width}, hoogte: ${data.height}`;
    })
        .catch(err => console.log(err))
    })
//zorgt ervoor dat de website gereset wordt als je op de reloadButton knop klikt
document.querySelector('.reloadButton').addEventListener('click', function() { 
    var confirmed = confirm("weet je zeker dat je opneiuw wilt beginnen?");
    if (confirmed) {
        location.reload()
    }

});
</script>

</body>
</html>
